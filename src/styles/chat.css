:root{
  --gold-1:#FFD600;
  --gold-2:#FFC107;
  --gold-grad: linear-gradient(45deg, var(--gold-1), var(--gold-2));
  --bg:#111; --bg2:#1a1a1a; --card:#141414; --text:#fff;
  --muted:#bdbdbd; --bot:#1f1f1f; --stroke:#333;
}

*{ box-sizing:border-box; }
html, body, #root{ height:100%; width:100%; margin:0; padding:0; }
body{ font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial; color:var(--text); }

.root{ display:flex; height:100vh; width:100vw; overflow:hidden; }

/* Sidebar */
.sidebar{
  width:280px; height:100%; flex-shrink:0;
  padding:20px; padding-bottom:90px; /* เว้นที่ให้โลโก้ */
  background:var(--bg2);
  border-right:2px solid var(--gold-1);
  box-shadow:2px 0 10px rgba(255,214,0,.18);
  display:flex; flex-direction:column; gap:14px;
  position:relative; /* ให้ footer วาง absolute ได้ */
}
.side-head{ color:var(--gold-1); font-weight:800; font-size:12px; letter-spacing:.1em; }

.chat-list{ overflow:auto; display:flex; flex-direction:column; gap:8px; padding-right:4px; }
.chat-tab{
  display:flex; align-items:center; gap:10px; width:100%;
  padding:12px 14px; border-radius:12px;
  background:#181818; border:1px solid var(--stroke);
  color:var(--text); text-align:left; cursor:pointer;
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
}
.chat-tab .dot{ width:8px; height:8px; border-radius:50%; background:var(--gold-1); box-shadow:0 0 8px rgba(255,214,0,.6); }
.chat-tab:hover{ border-color:var(--gold-1); background:#1d1d1d; box-shadow:0 4px 12px rgba(0,0,0,.25); transform:translateY(-1px); }
.chat-tab:active{ transform:translateY(0); }
.chat-tab.active{
  background: radial-gradient(120% 120% at 0% 0%, rgba(255,214,0,.14), transparent 50%), #161616;
  border-color:var(--gold-1);
}
.truncate{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Sidebar footer logo (fixed bottom) */
.sidebar-footer{
  position:absolute; left:20px; right:20px; bottom:20px;
  display:flex; align-items:center; justify-content:center;
}
.footer-logo{
  width:64px; height:64px; object-fit:contain;
  border-radius:50%; background:#000;
  border:2px solid var(--gold-1);
  padding:6px;
  box-shadow:0 0 12px rgba(255,214,0,.25);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}
.footer-logo:hover{ transform:scale(1.05); box-shadow:0 0 18px rgba(255,214,0,.6); filter:saturate(1.1); }

/* Main */
.main{ flex:1; height:100%; display:flex; flex-direction:column; padding:20px; gap:14px; }

.messages{
  flex:1; overflow:auto;
  background: linear-gradient(180deg, rgba(255,214,0,.04), transparent 120%), var(--card);
  border:1px solid var(--stroke); border-radius:16px; padding:18px;
  box-shadow: 0 8px 24px rgba(0,0,0,.25);
}

/* แถวของข้อความ */
.msg{ display:flex; margin:10px 0; align-items:flex-end; }
.msg.user{ justify-content:flex-end; }   /* ผู้ใช้ชิดขวา */
.msg.bot{  justify-content:flex-start; } /* บอทชิดซ้าย */

/* บับเบิล */
.bubble{
  display:inline-block;
  max-width: min(680px, 72%);
  padding:8px 14px;
  margin:4px 0;
  border-radius:16px;
  line-height:1.5;
  font-size:15px;
  box-shadow:0 4px 12px rgba(0,0,0,.25);
  /* force breaks inside long continuous strings */
  word-break: break-all;
  overflow-wrap: anywhere;
  /* allow normal wrapping (pre-wrap prevents breaking some long runs) */
  white-space: normal;
  hyphens: auto;
  transition: transform .12s ease, box-shadow .2s ease;
}
.bubble:hover{ transform:translateY(-1px); box-shadow:0 6px 16px rgba(0,0,0,.32); }

.bubble.gold{
  background:var(--gold-grad);
  color:#111;
  border:none;

  /* keep user newlines */
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;

  /* restore normal alignment */
  text-align: left;
  text-align-last: left;
  -moz-text-align-last: left;
}

.bubble.bot{  background:var(--bot); color:#f4f4f4; border:1px solid rgba(255,214,0,.25); }

.loading{ color:var(--gold-1); font-size:13px; margin-top:6px; }

/* ===== อ่านง่าย + เน้นหัวข้อสำคัญสำหรับบอท ===== */
.bubble.rich{
  background:var(--bot);
  border:1px solid rgba(255,214,0,.25);
  max-width:min(720px, 90%);
  line-height:1.85;
  font-size:16px;
  white-space:normal;
  text-align:left;
}
.bubble.rich p{ margin:0 0 12px; }
.bubble.rich h4{
  margin:14px 0 8px;
  font-size:18px;
  font-weight:900;
  color:#ffe071;
  display:inline-block;
  position:relative;
  padding-bottom:2px;
}
.bubble.rich h4::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:-2px;
  height:2px;
  background:linear-gradient(90deg, var(--gold-1), transparent 70%);
  opacity:.9;
}
.bubble.rich ul, .bubble.rich ol{
  margin:8px 0 12px 1.25em;
  padding:0;
}
.bubble.rich ul{ list-style:disc; }
.bubble.rich ol{ list-style:decimal; }
.bubble.rich li{ margin:6px 0; }
.bubble.rich strong{ font-weight:800; color:#ffe071; }

/* Composer */
.composer{
  display:flex;
  gap:10px;
  padding:12px;
  border:1px solid var(--stroke);
  border-radius:14px;
  background:#121212;
  align-items:center; /* กลับมาเป็น center */
}

/* textarea as input — ปรับให้ดูเหมือนช่อง input เดิม
   แต่ยังรองรับ auto-resize จาก Chat.jsx */
.input{
  flex:1;
  min-height:42px;        /* ความสูงเริ่มต้นเหมือนเดิม */
  max-height:240px;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid rgba(255,214,0,.5); /* สีขอบเหมือนก่อน */
  background:#0f0f0f;     /* พื้นหลังเข้ม */
  color:var(--text);
  font-size:15px;
  line-height:1.4;
  resize:none;            /* ห้าม user ดึงมุม */
  overflow:auto;
  transition: box-shadow .12s ease, border-color .2s ease, background .2s ease;
  outline: none;
  box-shadow: inset 0 1px 0 rgba(255,214,0,0.02);
  white-space: pre-wrap;  /* รักษา newline แต่ให้ห่อตามบรรทัด */
}
.input::placeholder{ color:#9a9a9a; }
.input:focus{ border-color:var(--gold-1); box-shadow:0 0 0 4px rgba(255,214,0,.06); background:#101010; }

/* ปุ่มส่ง ไม่ให้ยืดตาม textarea */
.composer .btn{
  align-self:center;
  height:44px;
  padding:10px 14px;
  white-space:nowrap;
}

/* เพิ่ม scrollbar เล็ก ๆ ใน textarea */
.input::-webkit-scrollbar{ height:8px; width:8px; }
.input::-webkit-scrollbar-thumb{ background:rgba(255,214,0,.18); border-radius:8px; }

/* ปรับสำหรับหน้าจอเล็ก */
@media (max-width: 640px){
  .messages{ padding:16px; }
  .bubble{ max-width: calc(100% - 56px); }
  .bubble.rich{ max-width: calc(100% - 56px); }
}

/* Buttons */
.btn{ border:none; border-radius:10px; padding:10px 16px; font-weight:800; cursor:pointer;
  transition: transform .12s ease, box-shadow .2s ease, filter .2s ease, opacity .2s ease; user-select:none; }
.btn:disabled{ opacity:.6; cursor:not-allowed; }
.btn:active{ transform:translateY(1px); }
.btn-gold{ background:var(--gold-grad); color:#111; box-shadow:0 8px 16px rgba(0,0,0,.35); }
.btn-gold:hover{ filter:brightness(1.02); box-shadow:0 10px 20px rgba(0,0,0,.45); }

/* Scrollbars */
.messages::-webkit-scrollbar, .chat-list::-webkit-scrollbar{ width:10px; }
.messages::-webkit-scrollbar-thumb, .chat-list::-webkit-scrollbar-thumb{ background:rgba(255,214,0,.35); border-radius:20px; }

/* Reduce motion */
@media (prefers-reduced-motion: reduce){ .btn, .bubble, .chat-tab, .footer-logo{ transition:none !important; } }